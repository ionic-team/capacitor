var __generator=this&&this.__generator||function(t,n){var e,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=n.call(t,u)}catch(t){a=[6,t],r=0}finally{e=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},hasOwnProperty=Object.prototype.hasOwnProperty;function is(t,n){return t===n?0!==t||0!==n||1/t==1/n:t!=t&&n!=n}function shallowEqual(t,n){if(is(t,n))return!0;if("object"!=typeof t||null===t||"object"!=typeof n||null===n)return!1;var e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;for(var o=0;o<e.length;o++)if(!hasOwnProperty.call(n,e[o])||!is(t[e[o]],n[e[o]]))return!1;return!0}var __awaiter=function(t,n,e,r){return new(e||(e=Promise))(function(o,a){function u(t){try{i(r.next(t))}catch(t){a(t)}}function l(t){try{i(r.throw(t))}catch(t){a(t)}}function i(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(u,l)}i((r=r.apply(t,n||[])).next())})};Context.activeRouter=function(){var t={},n=[];function e(n){return 0===Object.keys(t).length?{location:{pathname:Context.window.location.pathname,search:Context.window.location.search}}:n?t[n]:t}function r(){return __awaiter(this,void 0,void 0,function(){var t,r,o,a,u,l,i,c,s,f;return __generator(this,function(h){switch(h.label){case 0:for(t=n,r=[],o=e("location").pathname,a=function(n){var e,a=r.some(function(e){return null!=e[1]&&null!=e[2]&&e[2]===t[n].groupId});e=a?null:t[n].isMatch(o),shallowEqual(t[n].lastMatch,e)||(!a&&t[n].groupId?r.unshift([n,e,t[n].groupId]):r.push([n,e,t[n].groupId])),t[n].lastMatch=e},u=0;u<t.length;u++)a(u);l=0,i=r,h.label=1;case 1:return l<i.length?(c=i[l],s=c[0],f=c[1],c[2]&&null!=f?[4,t[s].listener(f)]:[3,3]):[3,5];case 2:return h.sent(),[3,4];case 3:t[s].listener(f),h.label=4;case 4:return l++,[3,1];case 5:return[2]}})})}return{set:function(n){t=Object.assign({},t,n),r()},get:e,subscribe:function(t){!function(t){var r=e("location").pathname,o=t.isMatch(r);if(t.lastMatch=o,t.listener(o),null==t.groupId||null==t.groupIndex||0===n.length)n.push(t);else for(var a=0;a<n.length;a++){var u=n[a],l=u.groupId,i=u.groupIndex;if(null==l){n.splice(a,0,t);break}if(l===t.groupId&&i>t.groupIndex){n.splice(a,0,t);break}}}(t);var r=!0;return function(){r&&(function(t){var e=n.indexOf(t);n.splice(e,1)}(t),r=!1)}},dispatch:r}}();