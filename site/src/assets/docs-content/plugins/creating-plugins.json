{"title":"Creating Capacitor Plugins","description":"Creating Capacitor Plugins","url":"/docs/plugins/creating-plugins","contributors":["mlynch","jcesarmobile"],"headings":[{"id":"creating-capacitor-plugins","level":1,"text":"Creating Capacitor Plugins"},{"id":"generate-plugin-scaffolding","level":2,"text":"Generate Plugin Scaffolding"},{"id":"javascript-implementation","level":2,"text":"JavaScript Implementation"},{"id":"ios-plugin","level":2,"text":"iOS Plugin"},{"id":"android-plugin","level":2,"text":"Android Plugin"},{"id":"web-plugin","level":2,"text":"Web Plugin"}],"srcPath":"./docs-md/plugins/creating-plugins.md","content":"\n<h1 id=\"creating-capacitor-plugins\">\n  \n  Creating Capacitor Plugins\n  \n</h1>\n<p>An Capacitor plugin relies on a JavaScript layer that proxies calls to Capacitor&#39;s cross-platform runtime which runs\nthe corresponding native or pure-web code to handle the operation.</p>\n<p>Thus, an Capacitor plugin consists of some JavaScript and then a native implementation for each platform that requires it.</p>\n<p>Let&#39;s implement a simple Todo plugin that stores a list of Todo&#39;s in native device storage or web storage depending on the platform available.</p>\n\n<h2 id=\"generate-plugin-scaffolding\">\n  <a class=\"heading-link\" href=\"#generate-plugin-scaffolding\"><ion-icon name=\"ios-link\"></ion-icon>\n  Generate Plugin Scaffolding\n  </a>\n</h2>\n<p>To generate a new plugin for development, run</p>\n\n  <highlight-code-line >\n    <pre class=\"language-bash\"><code class=\"language-bash\">capacitor plugin:generate com.example.plugin.todo Todo</code></pre>\n  </highlight-code-line>\n  <p>The plugin&#39;s structure will look similar to this:</p>\n\n<h2 id=\"javascript-implementation\">\n  <a class=\"heading-link\" href=\"#javascript-implementation\"><ion-icon name=\"ios-link\"></ion-icon>\n  JavaScript Implementation\n  </a>\n</h2>\n\n<h2 id=\"ios-plugin\">\n  <a class=\"heading-link\" href=\"#ios-plugin\"><ion-icon name=\"ios-link\"></ion-icon>\n  iOS Plugin\n  </a>\n</h2>\n\n  <highlight-code-line >\n    <pre class=\"language-swift\"><code class=\"language-swift\">import Capacitor\n\n@objc(Todo)\nclass Todo : Plugin {\n  @objc func create(_ call: PluginCall) {\n    // Grab the call arguments, guarding to ensure they exist\n    guard let title = call.get(\"title\", String.self) else {\n      call.error(\"Must provide title\")\n    }\n\n    guard let text = call.get(\"text\", String.self) else {\n      call.error(\"Must provide text\")\n    }\n\n    // Create the Todo\n    let todo = Todo(title, text)\n\n    // Save it somewhere\n    // ...\n\n    // Construct a new PluginResult object with the\n    // data we'll send back to the client\n    let result = [\n      \"todoId\": todo.id\n    ]\n\n    // Send the result back to the client\n    call.success(result)\n  }\n\n  @objc public func update(_ call: PluginCall) {\n    // ... exercise for the reader\n  }\n\n  @objc public func delete(_ call: PluginCall) {\n    // ... exercise for the reader\n  }\n}</code></pre>\n  </highlight-code-line>\n  \n<h2 id=\"android-plugin\">\n  <a class=\"heading-link\" href=\"#android-plugin\"><ion-icon name=\"ios-link\"></ion-icon>\n  Android Plugin\n  </a>\n</h2>\n\n  <highlight-code-line >\n    <pre class=\"language-java\"><code class=\"language-java\">package com.example.plugin;\n\nimport com.getcapacitor.NativePlugin;\nimport com.getcapacitor.Plugin;\nimport com.getcapacitor.PluginCall;\nimport com.getcapacitor.PluginMethod;\nimport com.getcapacitor.JSObject;\n\n@NativePlugin()\npublic class Todo extends Plugin {\n\n  @PluginMethod()\n  public void create(PluginCall call) {\n    String title = call.getString(\"title\");\n    String text = call.getString(\"text\");\n\n    Todo t = new Todo(title, text);\n    // save it somewhere\n\n    JSObject ret = new JSONObject();\n    try {\n      ret.put(\"todoId\", t.id);\n      call.success(ret);\n    } catch(JSONException ex) {\n      call.error(\"Unable to send todo\", ex);\n    }\n  }\n\n}</code></pre>\n  </highlight-code-line>\n  \n<h2 id=\"web-plugin\">\n  <a class=\"heading-link\" href=\"#web-plugin\"><ion-icon name=\"ios-link\"></ion-icon>\n  Web Plugin\n  </a>\n</h2>\n"}